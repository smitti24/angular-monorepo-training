# Angular NX Monorepo & Microfrontends Training - State File

> **For Claude:** Read this file at the start of any session to understand the course progress and context.

## âš ï¸ IMPORTANT: Update Triggers

**Claude MUST update this file when:**
1. Student says **"NEXT"** â†’ Mark current lesson complete, update "Current Position" to next lesson
2. Student completes an **exercise** â†’ Update exercise status, add to "Feedback Log"
3. A new **lesson is delivered** â†’ Add concepts to "Key Concepts Covered"
4. New **files/apps are created** â†’ Update "Project Structure" section
5. **Module completed** â†’ Update module status in "Course Structure"
6. Student **asks a question** â†’ Add Q&A to "Questions & Answers" section
7. **Pattern observed** â†’ Update "Learning Patterns"
8. **Commands used** â†’ Add to "Commands Reference"

**Always update the "Last updated" timestamp at the bottom.**

---

## Student Profile

- **Experience Level:** Tech Lead, 10 years of Angular experience
- **Angular Version Knowledge:** Solid foundation, but not expert in Angular 17+ (signals, new control flow)
- **Signals:** Basic understanding, needs deeper dive
- **NX:** Beginner - needs full setup and concepts
- **Microfrontends:** Beginner - needs architecture and implementation
- **Tailwind:** To be used for styling
- **Learning Style:** Udemy-style lessons with theory â†’ demo â†’ exercise â†’ review
- **Pace Control:** Student says "NEXT" to advance
- **Implementation:** Student implements everything themselves with Claude's instructions

---

## Learning Patterns

> Track what the student finds easy/difficult to tailor future lessons.

### Strengths
- 10 years Angular experience - understands core concepts deeply
- Tech Lead - can grasp architectural decisions quickly
- Questions industry best practices rather than blindly following instructions (good instinct)

### Areas to Reinforce
- *(Add as patterns emerge)*

### Common Mistakes Made
- *(Add as patterns emerge)*

---

## Course Structure

| Module | Topic | Lessons | Status |
|--------|-------|---------|--------|
| 1 | NX Fundamentals | 5 | â¬œ Not Started |
| 2 | Angular Signals Deep Dive | 4 | â¬œ Not Started |
| 3 | NX Libraries & Architecture | 4 | â¬œ Not Started |
| 4 | Tailwind in NX | 2 | â¬œ Not Started |
| 5 | Storybook in NX | 4 | â¬œ Not Started |
| 6 | Microfrontend Concepts | 3 | â¬œ Not Started |
| 7 | Module Federation Setup | 4 | â¬œ Not Started |
| 8 | Shared State & Communication | 3 | â¬œ Not Started |
| 9 | Advanced MF Patterns | 3 | â¬œ Not Started |
| 10 | Testing in NX Monorepo | 3 | â¬œ Not Started |
| 11 | Firebase Integration | 3 | â¬œ Not Started |
| 12 | CI/CD & Deployment | 2 | â¬œ Not Started |
| 13 | Capstone Project | 1 | â¬œ Not Started |

---

## Detailed Module Breakdown

### Module 1: NX Fundamentals
| Lesson | Topic | Status |
|--------|-------|--------|
| 1.1 | What is NX? Monorepo Philosophy | âœ… Complete |
| 1.2 | Creating Your First NX Workspace | âœ… Complete |
| 1.3 | NX CLI & Essential Commands | âœ… Complete |
| 1.4 | Understanding nx.json & project.json | ğŸŸ¡ In Progress |
| 1.5 | Dependency Graph & Affected Commands | â¬œ Not Started |

### Module 2: Angular Signals Deep Dive
| Lesson | Topic | Status |
|--------|-------|--------|
| 2.1 | Signals vs Observables - When to Use What | â¬œ Not Started |
| 2.2 | signal(), computed(), effect() | â¬œ Not Started |
| 2.3 | Input Signals & Model Signals | â¬œ Not Started |
| 2.4 | Signal-based State Management Patterns | â¬œ Not Started |

### Module 3: NX Libraries & Architecture
| Lesson | Topic | Status |
|--------|-------|--------|
| 3.1 | Library Types (Feature, UI, Data-Access, Util) | â¬œ Not Started |
| 3.2 | Creating & Organizing Libraries | â¬œ Not Started |
| 3.3 | Enforcing Boundaries with Tags | â¬œ Not Started |
| 3.4 | Buildable vs Publishable Libraries | â¬œ Not Started |

### Module 4: Tailwind in NX
| Lesson | Topic | Status |
|--------|-------|--------|
| 4.1 | Setting Up Tailwind in NX Workspace | â¬œ Not Started |
| 4.2 | Sharing Tailwind Config Across Apps | â¬œ Not Started |

### Module 5: Storybook in NX
| Lesson | Topic | Status |
|--------|-------|--------|
| 5.1 | Setting Up Storybook in NX Workspace | â¬œ Not Started |
| 5.2 | Writing Stories for Angular Components (CSF3) | â¬œ Not Started |
| 5.3 | Storybook with Tailwind & Shared Styles | â¬œ Not Started |
| 5.4 | Storybook Composition & Autodocs | â¬œ Not Started |

### Module 6: Microfrontend Concepts
| Lesson | Topic | Status |
|--------|-------|--------|
| 6.1 | What are Microfrontends? Architecture Patterns | â¬œ Not Started |
| 6.2 | Module Federation Explained | â¬œ Not Started |
| 6.3 | When to Use (and NOT Use) Microfrontends | â¬œ Not Started |

### Module 7: Module Federation Setup
| Lesson | Topic | Status |
|--------|-------|--------|
| 7.1 | Creating Host & Remote Applications | â¬œ Not Started |
| 7.2 | Configuring module-federation.config.ts | â¬œ Not Started |
| 7.3 | Exposing & Consuming Remote Modules | â¬œ Not Started |
| 7.4 | Dynamic Remote Loading | â¬œ Not Started |

### Module 8: Shared State & Communication
| Lesson | Topic | Status |
|--------|-------|--------|
| 8.1 | Sharing Libraries Between MFs | â¬œ Not Started |
| 8.2 | Cross-MF Communication Patterns | â¬œ Not Started |
| 8.3 | Shared Authentication & State | â¬œ Not Started |

### Module 9: Advanced MF Patterns
| Lesson | Topic | Status |
|--------|-------|--------|
| 9.1 | Error Boundaries & Fallbacks | â¬œ Not Started |
| 9.2 | Versioning & Independent Deployments | â¬œ Not Started |
| 9.3 | Performance Optimization | â¬œ Not Started |

### Module 10: Testing in NX Monorepo
| Lesson | Topic | Status |
|--------|-------|--------|
| 10.1 | Unit Testing with Vitest in NX | â¬œ Not Started |
| 10.2 | Component Testing Strategies | â¬œ Not Started |
| 10.3 | E2E Testing Microfrontends | â¬œ Not Started |

### Module 11: Firebase Integration
| Lesson | Topic | Status |
|--------|-------|--------|
| 11.1 | Firebase Setup in NX Monorepo | â¬œ Not Started |
| 11.2 | Firestore Data Access Library | â¬œ Not Started |
| 11.3 | Cloud Functions in the Monorepo | â¬œ Not Started |

### Module 12: CI/CD & Deployment
| Lesson | Topic | Status |
|--------|-------|--------|
| 12.1 | NX Cloud & Caching | â¬œ Not Started |
| 12.2 | Deploying MFs to Firebase Hosting | â¬œ Not Started |

### Module 13: Capstone Project
| Lesson | Topic | Status |
|--------|-------|--------|
| 13.1 | Build a Complete MF Application | â¬œ Not Started |

---

## Current Position

**Module:** 1 - NX Fundamentals
**Lesson:** 1.4 - Understanding nx.json & project.json
**Status:** ğŸŸ¡ In Progress

---

## Key Concepts Covered

### Lesson 1.1
- Monorepo vs Polyrepo - single repo, multiple projects
- NX as a build system with monorepo tooling
- Dependency graph - NX understands code relationships
- Affected commands - only build/test what changed
- Key terminology: workspace, project, target, executor, generator

### Lesson 1.2
- NX workspace should live at the **root** of the git repo (industry standard)
- NX is plugin-based: core (`nx`) handles task runner/caching/graph, plugins (`@nx/angular`) add generators & executors
- `@nx/angular` plugin provides Angular-specific generators (app, lib, component) and executors (build, serve, test)
- App naming convention: "shell" = the MF host app that loads remotes
- Key generator flags: `--standalone` (no NgModules), `--routing`, `--ssr=false` (MFs don't mix with SSR)
- NX convention: apps in `apps/`, libraries in `libs/`
- **project.json** replaces angular.json â€” each project gets its own, defines targets (build, serve, test, lint)
- **Targets** = commands NX can run; **Executors** = the tools that run them (e.g., `@angular/build:application`)
- **Configurations** â€” production vs development per target, with `defaultConfiguration` controlling which is default
- **nx.json** stores workspace-wide settings: targetDefaults (caching, dependency order), plugins, generator defaults
- **Generator defaults** saved in nx.json â†’ next `nx generate` reuses choices (Playwright, Vitest, CSS)
- `tags: []` in project.json â€” used later for enforcing library boundaries (Module 3)
- Standalone Angular: `bootstrapApplication()` + `ApplicationConfig` â€” no NgModules
- **esbuild** chosen for fast dev builds; will switch to **webpack** when adding Module Federation (Module 7)
- `"dependsOn": ["^build"]` means NX builds dependencies before the app (topological ordering)
- `"cache": true` on targets enables NX computation caching

### Lesson 1.3
- CLI pattern: `nx <command> [project] [options]`
- Three command categories: task runners, code generation, workspace info
- `nx run project:target:config` = explicit form; `nx target project` = shorthand
- `run-many -t <target>` runs across all projects â€” essential for CI
- `nx graph` visualizes project dependency graph in browser
- `--dry-run` on generators previews without writing files
- NX caching: hashes inputs, replays output if nothing changed (instant second runs)
- `nx reset` clears cache; `nx report` shows plugin versions for debugging
- **Version management**: always use `nx migrate` to upgrade â€” never manually bump @nx/* versions
- `migrations.json` may be created during migration â€” run `nx migrate --run-migrations` then delete it

### Lesson 1.4
- Config inheritance: nx.json (workspace) â†’ project.json (project) â†’ `nx show project` (resolved)
- **namedInputs** control cache invalidation: `default` (all files), `production` (excludes lint config), `sharedGlobals` (workspace-wide)
- `!` prefix in inputs = exclude; `^` prefix = upstream dependencies
- **targetDefaults** apply to every project using that executor â€” `cache`, `dependsOn`, `inputs`
- Build uses `production` inputs, test uses `default` inputs (different cache granularity)
- **Plugins auto-infer targets** from config files â€” Playwright sees `playwright.config.ts`, ESLint sees `eslint.config.mjs`
- Configuration merge: `options` (base) + `configurations.<name>` (overrides) = final config
- `serve` delegates to `build` via `buildTarget: "shell:build:development"` â€” no config duplication
- `outputs` tells NX where artifacts go for cache restoration
- **tsconfig.base.json `paths`** enables clean cross-project imports â€” auto-populated by generators
- tsconfig inheritance: `tsconfig.base.json` â†’ `tsconfig.json` â†’ `tsconfig.app.json` / `tsconfig.spec.json`
- `defaultBase` in nx.json = git branch for `nx affected` comparisons

---

## Project Structure

```
angular-monorepo-training/          â† Git repo root + NX workspace root
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ shell/                      â† Angular 21 standalone app (MF host)
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.ts          â† Root component (standalone)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.config.ts   â† App providers (router, etc.)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.routes.ts   â† Route definitions
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.html        â† Root template
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.css         â† Component styles
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ app.spec.ts     â† Unit test (Vitest)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ nx-welcome.ts   â† NX placeholder component
â”‚   â”‚   â”‚   â”œâ”€â”€ main.ts             â† Bootstrap (bootstrapApplication)
â”‚   â”‚   â”‚   â”œâ”€â”€ styles.css          â† Global styles
â”‚   â”‚   â”‚   â””â”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ public/favicon.ico
â”‚   â”‚   â”œâ”€â”€ project.json            â† NX project config (targets)
â”‚   â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”‚   â”œâ”€â”€ tsconfig.app.json
â”‚   â”‚   â”œâ”€â”€ tsconfig.spec.json
â”‚   â”‚   â””â”€â”€ eslint.config.mjs
â”‚   â””â”€â”€ shell-e2e/                  â† Playwright E2E tests
â”‚       â”œâ”€â”€ src/example.spec.ts
â”‚       â”œâ”€â”€ playwright.config.ts
â”‚       â””â”€â”€ project.json
â”œâ”€â”€ nx.json                         â† Workspace config (targets, plugins, generator defaults)
â”œâ”€â”€ package.json                    â† Angular 21, NX 22, Vitest 4, Playwright
â”œâ”€â”€ tsconfig.base.json
â”œâ”€â”€ COURSE_STATE.md
â””â”€â”€ README.md
```

---

## Commands Reference

```bash
# Lesson 1.2
npm install -D @nx/angular                            # Install Angular plugin for NX
npx nx generate @nx/angular:application --name=shell  # Generate a new Angular app
npx nx serve shell                                    # Serve an app locally (default: http://localhost:4200)
# Generator options used: --directory=apps/shell --style=css --routing=true --standalone=true --prefix=app --ssr=false
# Interactive choices: angular-vitest, playwright, esbuild

# Lesson 1.3
npx nx show projects                                  # List all projects
npx nx show project shell                             # Show resolved config for a project
npx nx run shell:test                                 # Run target (explicit: project:target:config)
npx nx test shell                                     # Run target (shorthand)
npx nx run-many -t test                               # Run target on ALL projects
npx nx graph                                          # Interactive dependency graph
npx nx list @nx/angular                               # Show generators & executors
npx nx generate ... --dry-run                         # Preview generator output
npx nx report                                         # Show plugin versions
npx nx reset                                          # Clear NX cache
npx nx migrate nx@<version>                           # Upgrade NX (aligns all @nx/* packages)
```

---

## Questions & Answers

### Lesson 1.2
**Q: Is nesting the NX workspace inside a subdirectory the recommended industry standard?**
A: No. The standard is NX workspace at the **root** of the git repo. Nesting causes friction with NX Console (VS Code extension), CI/CD pipelines, NX CLI (always needing to cd), and NX Cloud. Non-NX files like COURSE_STATE.md can coexist at root without issues. `create-nx-workspace` generates at root by default for this reason.

---

## Feedback Log

*(Exercise feedback will be logged here)*

---

## Prerequisites Checklist

- [ ] Node.js 18+ installed
- [ ] npm or pnpm installed
- [ ] VS Code with NX Console extension (recommended)
- [ ] Git installed

---

## Notes for Claude

- Student has 10 years Angular experience - skip basic Angular concepts
- Focus heavily on NX architecture and Microfrontend patterns
- Use Signals throughout (not traditional RxJS where signals work better)
- Tailwind for all styling
- Student implements everything - Claude provides instructions only
- Be concise but thorough on architectural decisions
- Real-world patterns are important (Tech Lead needs to teach team)
- **Create a lesson .md file** in `lessons/` for every lesson (theory, hands-on steps, key files, takeaways)

---

## Update Log

| Date | Update |
|------|--------|
| Session 1 | Course initialized, ready to begin Module 1 |
| Session 2 | Added Module 5: Storybook in NX (4 lessons), renumbered Modules 5-12 â†’ 6-13. Lessons 1.2-1.3 delivered. |

---

*Last updated: 2026-02-10 - Lesson 1.4 delivered, nx.json & project.json deep dive*
